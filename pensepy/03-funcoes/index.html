<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Capítulo 3: Funções - Pense Python</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Cap\u00edtulo 3: Fun\u00e7\u00f5es";
    var mkdocs_page_input_path = "03-funcoes.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Pense Python</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Pense em Python</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../00-prefacio/">Prefácio</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../01-jornada/">Capítulo 1: A jornada do programa</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../02-vars-expr-instr/">Capítulo 2: Variáveis, expressões e instruções</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Capítulo 3: Funções</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#31-chamada-de-funcao">3.1 - Chamada de função</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#32-funcoes-matematicas">3.2 - Funções matemáticas</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#33-composicao">3.3 - Composição</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#34-como-acrescentar-novas-funcoes">3.4 - Como acrescentar novas funções</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#35-uso-e-definicoes">3.5 - Uso e definições</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#36-fluxo-de-execucao">3.6 - Fluxo de execução</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#37-parametros-e-argumentos">3.7 - Parâmetros e argumentos</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#38-as-variaveis-e-os-parametros-sao-locais">3.8 - As variáveis e os parâmetros são locais</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#39-diagrama-da-pilha">3.9 - Diagrama da pilha</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#310-funcoes-com-resultado-e-funcoes-nulas">3.10 - Funções com resultado e funções nulas</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#311-por-que-funcoes">3.11 - Por que funções?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#312-depuracao">3.12 - Depuração</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#313-glossario">3.13 - Glossário</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#314-exercicios">3.14 - Exercícios</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#exercicio-31">Exercício 3.1</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#exercicio-32">Exercício 3.2</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#exercicio-33">Exercício 3.3</a>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../04-caso-interface/">Capítulo 4: Estudo de caso: projeto de interface</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../05-cond-recur/">Capítulo 5: Condicionais e recursividade</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../06-funcoes-result/">Capítulo 6: Funções com resultado</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../07-iteracao/">Capítulo 7: Iteração</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../08-strings/">Capítulo 8: Strings</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../09-caso-palavras/">Capítulo 9: Estudo de caso: jogos de palavras</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../10-listas/">Capítulo 10: Listas</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../11-dicionarios/">Capítulo 11: Dicionários</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../12-tuplas/">Capítulo 12: Tuplas</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../13-caso-estruturas/">Capítulo 13: Estudo de caso: seleção de estrutura de dados</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../14-arquivos/">Capítulo 14: Arquivos</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../15-classes-objetos/">Capítulo 15: Classes e objetos</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../16-classes-funcoes/">Capítulo 16: Classes e funções</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../17-classes-metodos/">Capítulo 17: Classes e métodos</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../18-heranca/">Capítulo 18: Herança</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../19-extra/">Capítulo 19: Extra</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../A-depuracao/">Apêndice A: Depuração</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../B-analise-algorit/">Apêndice B: Análise de algoritmos</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../C-colofao-autor/">Colofão</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Pense Python</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Capítulo 3: Funções</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="capitulo-3-funcoes">Capítulo 3: Funções</h1>
<p>No contexto da programação, uma função é uma sequência nomeada de instruções que executa uma operação de computação. Ao definir uma função, você especifica o nome e a sequência de instruções. Depois, pode “chamar” a função pelo nome.</p>
<h2 id="31-chamada-de-funcao">3.1 - Chamada de função</h2>
<p>Já vimos um exemplo de chamada de função:</p>
<pre><code class="language-python">&gt;&gt;&gt; type(42)
&lt;class 'int'&gt;
</code></pre>
<p>O nome da função é type. A expressão entre parênteses é chamada de argumento da função. Para esta função, o resultado é o tipo do argumento.</p>
<p>É comum dizer que uma função “recebe” um argumento e “retorna” um resultado. O resultado também é chamado de valor de retorno.</p>
<p>O Python oferece funções que convertem valores de um tipo em outro. A função int recebe qualquer valor e o converte em um número inteiro, se for possível, ou declara que há um erro:</p>
<pre><code class="language-python">&gt;&gt;&gt; int('32')
32
&gt;&gt;&gt; int('Hello')
ValueError: invalid literal for int(): Hello
</code></pre>
<p><code>int</code> pode converter valores de ponto flutuante em números inteiros, mas não faz arredondamentos; ela apenas corta a parte da fração:</p>
<pre><code class="language-python">&gt;&gt;&gt; int(3.99999)
3
&gt;&gt;&gt; int(-2.3)
-2
</code></pre>
<p><code>float</code> converte números inteiros e strings em números de ponto flutuante:</p>
<pre><code class="language-python">&gt;&gt;&gt; float(32)
32.0
&gt;&gt;&gt; float('3.14159')
3.14159
</code></pre>
<p>Finalmente, <code>str</code> converte o argumento em uma string:</p>
<pre><code class="language-python">&gt;&gt;&gt; str(32)
'32'
&gt;&gt;&gt; str(3.14159)
'3.14159'
</code></pre>
<h2 id="32-funcoes-matematicas">3.2 - Funções matemáticas</h2>
<p>O Python tem um módulo matemático que oferece a maioria das funções matemáticas comuns. Um módulo é um arquivo que contém uma coleção de funções relacionadas.</p>
<p>Antes que possamos usar as funções em um módulo, precisamos importá-lo com uma instrução de importação:</p>
<pre><code class="language-python">&gt;&gt;&gt; import math
</code></pre>
<p>Esta instrução cria um objeto de módulo chamado math (matemática). Ao se exibir o objeto de módulo, são apresentadas informações sobre ele:</p>
<pre><code class="language-python">&gt;&gt;&gt; math
&lt;module 'math' (built-in)&gt;
</code></pre>
<p>O objeto de módulo contém as funções e variáveis definidas no módulo. Para acessar uma das funções, é preciso especificar o nome do módulo e o nome da função, separados por um ponto. Este formato é chamado de notação de ponto.</p>
<pre><code class="language-python">&gt;&gt;&gt; ratio = signal_power / noise_power
&gt;&gt;&gt; decibels = 10 * math.log10(ratio)
&gt;&gt;&gt; radians = 0.7
&gt;&gt;&gt; height = math.sin(radians)
</code></pre>
<p>O primeiro exemplo usa math.log10 para calcular a proporção de sinal e de ruído em decibéis (assumindo que signal_power e noise_power tenham sido definidos). O módulo matemático também oferece a função log, que calcula logaritmos de base e.</p>
<p>O segundo exemplo encontra o seno de radians. O nome da variável indica que sin e outras funções trigonométricas (cos, tan etc.) recebem argumentos em radianos. Para converter graus em radianos, divida por 180 e multiplique por π:</p>
<pre><code class="language-python">&gt;&gt;&gt; degrees = 45
&gt;&gt;&gt; radians = degrees / 180.0 * math.pi
&gt;&gt;&gt; math.sin(radians)
0.707106781187
</code></pre>
<p>A expressão math.pi recebe a variável pi do módulo matemático. Seu valor é uma aproximação de ponto flutuante de π, com precisão aproximada de 15 dígitos.</p>
<p>Se souber trigonometria, você pode verificar o resultado anterior comparando-o com a raiz quadrada de 2 dividida por 2:</p>
<pre><code class="language-python">&gt;&gt;&gt; math.sqrt(2) / 2.0
0.707106781187
</code></pre>
<h2 id="33-composicao">3.3 - Composição</h2>
<p>Por enquanto, falamos sobre os elementos de um programa – variáveis, expressões e instruções – de forma isolada, mas não sobre como combiná-los.</p>
<p>Uma das características mais úteis das linguagens de programação é a sua capacidade de usar pequenos blocos de montar para compor programas. Por exemplo, o argumento de uma função pode ser qualquer tipo de expressão, inclusive operadores aritméticos:</p>
<pre><code class="language-python">x = math.sin(degrees / 360.0 * 2 * math.pi)
E até chamadas de função:
x = math.exp(math.log(x+1))
</code></pre>
<p>É possível colocar um valor, uma expressão arbitrária, em quase qualquer lugar. Com uma exceção: o lado esquerdo de uma instrução de atribuição tem que ser um nome de variável. Qualquer outra expressão no lado esquerdo é um erro de sintaxe (veremos exceções a esta regra depois).</p>
<pre><code class="language-python">&gt;&gt;&gt; minutes = hours * 60                # correto
&gt;&gt;&gt; hours * 60 = minutes                # errado!
SyntaxError: can't assign to operator
</code></pre>
<h2 id="34-como-acrescentar-novas-funcoes">3.4 - Como acrescentar novas funções</h2>
<p>Por enquanto, só usamos funções que vêm com o Python, mas também é possível acrescentar novas funções. Uma definição de função especifica o nome de uma nova função e a sequência de instruções que são executadas quando a função é chamada.</p>
<p>Aqui está um exemplo:</p>
<pre><code class="language-python">def print_lyrics():
    print(&quot;I'm a lumberjack, and I'm okay.&quot;)
    print(&quot;I sleep all night and I work all day.&quot;)
</code></pre>
<p><code>def</code> é uma palavra-chave que indica uma definição de função. O nome da função é <code>print_lyrics</code>. As regras para nomes de função são as mesmas que as das variáveis: letras, números e sublinhado são legais, mas o primeiro caractere não pode ser um número. Não podemos usar uma palavra-chave como nome de uma função e devemos evitar ter uma variável e uma função com o mesmo nome.</p>
<p>Os parênteses vazios depois do nome indicam que esta função não usa argumentos.</p>
<p>A primeira linha da definição de função chama-se cabeçalho; o resto é chamado de corpo. O cabeçalho precisa terminar em dois pontos e o corpo precisa ser endentado. Por convenção, a endentação sempre é de quatro espaços. O corpo pode conter qualquer número de instruções.</p>
<p>As strings nas instruções de exibição são limitadas por aspas duplas. As aspas simples e as aspas duplas fazem a mesma coisa; a maior parte das pessoas usa aspas simples apenas nos casos em que aspas simples (que também são apóstrofes) aparecem na string.</p>
<p>Todas as aspas (simples e duplas) devem ser “aspas retas”, normalmente encontradas ao lado do Enter no teclado. “Aspas curvas”, como as desta oração, não são legais no Python.</p>
<p>Se digitar uma definição de função no modo interativo, o interpretador exibe pontos (...) para mostrar que a definição não está completa:</p>
<pre><code class="language-python">&gt;&gt;&gt; def print_lyrics():
...     print(&quot;I'm a lumberjack, and I'm okay.&quot;)
</code></pre>
<p>...     print("I sleep all night and I work all day.")</p>
<pre><code class="language-python">...
</code></pre>
<p>Para terminar a função, é preciso inserir uma linha vazia.</p>
<p>A definição de uma função cria um objeto de função, que tem o tipo function:</p>
<pre><code class="language-python">&gt;&gt;&gt; print(print_lyrics)
&lt;function print_lyrics at 0xb7e99e9c&gt;
&gt;&gt;&gt; type(print_lyrics)
&lt;class 'function'&gt;
</code></pre>
<p>A sintaxe para chamar a nova função é a mesma que a das funções integradas:</p>
<pre><code class="language-python">&gt;&gt;&gt; print_lyrics()
I'm a lumberjack, and I'm okay.
I sleep all night and I work all day.
</code></pre>
<p>Uma vez que a função tenha sido definida, é possível usá-la dentro de outra função. Por exemplo, para repetir o refrão anterior, podemos escrever uma função chamada <code>repeat_lyrics</code>:</p>
<pre><code class="language-python">def repeat_lyrics():
    print_lyrics()
    print_lyrics()
</code></pre>
<p>E daí chamar <code>repeat_lyrics</code>:</p>
<pre><code class="language-python">&gt;&gt;&gt; repeat_lyrics()
I'm a lumberjack, and I'm okay.
I sleep all night and I work all day.
I'm a lumberjack, and I'm okay.
I sleep all night and I work all day.
Mas a canção não é bem assim.
</code></pre>
<h2 id="35-uso-e-definicoes">3.5 - Uso e definições</h2>
<p>Juntando fragmentos de código da seção anterior, o programa inteiro fica assim:</p>
<pre><code class="language-python">def print_lyrics():
    print(&quot;I'm a lumberjack, and I'm okay.&quot;)
    print(&quot;I sleep all night and I work all day.&quot;)

def repeat_lyrics():
    print_lyrics()
    print_lyrics()

repeat_lyrics()
</code></pre>
<p>Este programa contém duas definições de função: <code>print_lyrics</code> e <code>repeat_lyrics</code>. As definições de função são executadas como outras instruções, mas o efeito é criar objetos de função. As instruções dentro da função não são executadas até que a função seja chamada, e a definição de função não gera nenhuma saída.</p>
<p>Como poderíamos esperar, é preciso criar uma função antes de executá-la. Em outras palavras, a definição de função tem que ser executada antes que a função seja chamada.</p>
<p>Como exercício, mova a última linha deste programa para o topo, para que a chamada de função apareça antes das definições. Execute o programa e veja qual é a mensagem de erro que aparece.</p>
<p>Agora mova a chamada de função de volta para baixo e mova a definição de <code>print_lyrics</code> para depois da definição de <code>repeat_lyrics</code>. O que acontece quando este programa é executado?</p>
<h2 id="36-fluxo-de-execucao">3.6 - Fluxo de execução</h2>
<p>Para garantir que uma função seja definida antes do seu primeiro uso, é preciso saber a ordem na qual as instruções serão executadas. Isso é chamado de fluxo de execução.</p>
<p>A execução sempre começa na primeira instrução do programa. As instruções são executadas uma após a outra, de cima para baixo.</p>
<p>As definições de função não alteram o fluxo da execução do programa, mas lembre-se de que as instruções dentro da função não são executadas até a função ser chamada.</p>
<p>Uma chamada de função é como um desvio no fluxo de execução. Em vez de ir à próxima instrução, o fluxo salta para o corpo da função, executa as instruções lá, e então volta para continuar de onde parou.</p>
<p>Parece bastante simples, até você lembrar que uma função pode chamar outra. Enquanto estiver no meio de uma função, o programa pode ter que executar as instruções em outra função. Então, enquanto estiver executando a nova função, o programa pode ter que executar mais uma função!</p>
<p>Felizmente, o Python é bom em não perder o fio da meada, então cada vez que uma função é concluída, o programa continua de onde parou na função que o chamou. Quando chega no fim do programa, ele é encerrado.</p>
<p>Resumindo, nem sempre se deve ler um programa de cima para baixo. Às vezes faz mais sentido seguir o fluxo de execução.</p>
<h2 id="37-parametros-e-argumentos">3.7 - Parâmetros e argumentos</h2>
<p>Algumas funções que vimos exigem argumentos. Por exemplo, ao chamar math.sin, você usa um número como argumento. Algumas funções exigem mais de um argumento: o math.pow exige dois, a base e o expoente.</p>
<p>Dentro da função, os argumentos são atribuídos a variáveis chamadas parâmetros. Aqui está a definição de uma função que precisa de um argumento:</p>
<pre><code class="language-python">def print_twice(bruce):
    print(bruce)
    print(bruce)
</code></pre>
<p>Esta função atribui o argumento a um parâmetro chamado bruce. Quando a função é chamada, ela exibe o valor do parâmetro (seja qual for) duas vezes.</p>
<p>Esta função funciona com qualquer valor que possa ser exibido:</p>
<pre><code class="language-python">&gt;&gt;&gt; print_twice('Spam')
Spam
Spam
&gt;&gt;&gt; print_twice(42)
42
42
&gt;&gt;&gt; print_twice(math.pi)
3.14159265359
3.14159265359
</code></pre>
<p>As mesmas regras de composição usadas para funções integradas também são aplicadas a funções definidas pelos programadores, então podemos usar qualquer tipo de expressão como argumento para <code>print_twice</code>:</p>
<pre><code class="language-python">&gt;&gt;&gt; print_twice('Spam '*4)
Spam Spam Spam Spam
Spam Spam Spam Spam
&gt;&gt;&gt; print_twice(math.cos(math.pi))
-1.0
-1.0
</code></pre>
<p>O argumento é avaliado antes de a função ser chamada. Então, nos exemplos, as expressões <code>'Spam * 4</code> e <code>math.cos(math.pi)</code> só são avaliadas uma vez.</p>
<pre><code class="language-python">Você também pode usar uma variável como argumento:
&gt;&gt;&gt; michael = 'Eric, the half a bee.'
&gt;&gt;&gt; print_twice(michael)
Eric, the half a bee.
Eric, the half a bee.
</code></pre>
<p>O nome da variável que passamos como argumento (michael) não tem nada a ver com o nome do parâmetro (bruce). Não importa que o valor tenha sido chamado de volta (em quem chama); aqui em <code>print_twice</code>, chamamos todo mundo de bruce.</p>
<h2 id="38-as-variaveis-e-os-parametros-sao-locais">3.8 - As variáveis e os parâmetros são locais</h2>
<p>Quando você cria uma variável dentro de uma função, ela é local, ou seja, ela só existe dentro da função. Por exemplo:</p>
<pre><code class="language-python">def cat_twice(part1, part2):
    cat = part1 + part2
    print_twice(cat)
</code></pre>
<p>Esta função recebe dois argumentos, concatena-os e exibe o resultado duas vezes. Aqui está um exemplo que a usa:</p>
<pre><code class="language-python">&gt;&gt;&gt; line1 = 'Bing tiddle '
&gt;&gt;&gt; line2 = 'tiddle bang.'
&gt;&gt;&gt; cat_twice(line1, line2)
Bing tiddle tiddle bang.
Bing tiddle tiddle bang.
</code></pre>
<p>Quando <code>cat_twice</code> é encerrada, a variável <code>cat</code> é destruída. Se tentarmos exibi-la, recebemos uma exceção:</p>
<pre><code class="language-python">&gt;&gt;&gt; print(cat)
NameError: name 'cat' is not defined
</code></pre>
<p>Os parâmetros também são locais. Por exemplo, além de print_twice, não existe o bruce.</p>
<h2 id="39-diagrama-da-pilha">3.9 - Diagrama da pilha</h2>
<p>Para monitorar quais variáveis podem ser usadas e onde, é uma boa ideia desenhar um diagrama da pilha. Assim como diagramas de estado, os diagramas da pilha mostram o valor de cada variável, mas também mostram a função à qual cada variável pertence.</p>
<p>Cada função é representada por um frame (quadro). Um frame é uma caixa com o nome de uma função junto a ele e os parâmetros e as variáveis da função dentro dele. O diagrama da pilha para o exemplo anterior é exibido na Figura 3.1.</p>
<p><img alt="Figura 3.1 – Diagrama da pilha." src="https://github.com/PenseAllen/PensePython2e/raw/master/fig/tnkp_0301.png" />
<br><em>Figura 3.1 – Diagrama da pilha.</em></p>
<p>Os frames são organizados em uma pilha que indica qual função que foi chamada por outra, e assim por diante. Neste exemplo, <code>print_twice</code> foi chamada por <code>cat_twice</code> e <code>cat_twice</code> foi chamada por <code>__main__</code>, que é um nome especial para o frame na posição mais proeminente. Quando você cria uma variável fora de qualquer função, ela pertence a <code>__main__</code>.</p>
<p>Cada parâmetro refere-se ao mesmo valor como seu argumento correspondente. Desta forma, part1 tem o mesmo valor que line1, part2 tem o mesmo valor que line2 e bruce tem o mesmo valor que cat.</p>
<p>Se ocorrer um erro durante uma chamada de função, o Python exibe o nome da função, o nome da função que a chamou e o nome da função que chamou esta função por sua vez, voltando até <code>__main__</code>.</p>
<p>Por exemplo, se você tentar acessar <code>cat</code> de dentro de <code>print_twice</code>, receberá uma mensagem de <code>NameError</code>:</p>
<pre><code class="language-python">Traceback (innermost last):
  File &quot;test.py&quot;, line 13, in __main__
    cat_twice(line1, line2)
  File &quot;test.py&quot;, line 5, in cat_twice
    print_twice(cat)
  File &quot;test.py&quot;, line 9, in print_twice
    print(cat)
NameError: name 'cat' is not defined
</code></pre>
<p>Esta lista de funções é chamada de traceback. Ela mostra o arquivo do programa em que o erro ocorreu e em que linha, e quais funções estavam sendo executadas no momento. Ele também mostra a linha de código que causou o erro.</p>
<p>A ordem das funções no traceback é a mesma que a ordem dos frames no diagrama da pilha. A função que está sendo executada no momento está no final.</p>
<h2 id="310-funcoes-com-resultado-e-funcoes-nulas">3.10 - Funções com resultado e funções nulas</h2>
<p>Algumas funções que usamos, como as funções matemáticas, devolvem resultados; por falta de um nome melhor, vou chamá-las de funções com resultados. Outras funções, como print_twice, executam uma ação, mas não devolvem um valor. Elas são chamadas de funções nulas.</p>
<p>Quando você chama uma função com resultado, quase sempre quer fazer algo com o resultado; por exemplo, você pode atribui-lo a uma variável ou usá-la como parte de uma expressão:</p>
<pre><code class="language-python">x = math.cos(radians)
golden = (math.sqrt(5) + 1) / 2
</code></pre>
<p>Quando você chama uma função no modo interativo, o Python exibe o resultado:</p>
<pre><code class="language-python">&gt;&gt;&gt; math.sqrt(5)
2.2360679774997898
</code></pre>
<p>Mas em um script, se você chamar uma função com resultado e mais nada, o valor de retorno é perdido para sempre!</p>
<pre><code class="language-python">math.sqrt(5)
</code></pre>
<p>Este script calcula a raiz quadrada de 5, mas como não armazena ou exibe o resultado, não é muito útil.</p>
<p>As funções nulas podem exibir algo na tela ou ter algum outro efeito, mas não têm um valor de retorno. Se você atribuir o resultado a uma variável, recebe um valor especial chamado None:</p>
<pre><code class="language-python">&gt;&gt;&gt; result = print_twice('Bing')
Bing
Bing
&gt;&gt;&gt; print(result)
None
</code></pre>
<p>O valor <code>None</code> não é o mesmo que a string <code>'None'</code>. É um valor especial que tem seu próprio tipo:</p>
<pre><code class="language-python">&gt;&gt;&gt; print(type(None))
&lt;class 'NoneType'&gt;
</code></pre>
<p>As funções que apresentamos por enquanto são todas nulas. Vamos apresentar funções com resultado mais adiante.</p>
<h2 id="311-por-que-funcoes">3.11 - Por que funções?</h2>
<p>Caso o objetivo de dividir um programa em funções não esteja claro, saiba que na verdade há várias razões:</p>
<ul>
<li>
<p>Criar uma nova função dá a oportunidade de nomear um grupo de instruções, o que deixa o seu programa mais fácil de ler e de depurar.</p>
</li>
<li>
<p>As funções podem tornar um programa menor, eliminando o código repetitivo. Depois, se fizer alguma alteração, basta fazê-la em um lugar só.</p>
</li>
<li>
<p>Dividir um programa longo em funções permite depurar as partes uma de cada vez e então reuni-las em um conjunto funcional.</p>
</li>
<li>
<p>As funções bem projetadas muitas vezes são úteis para muitos programas. Uma vez que escreva e depure uma, você pode reutilizá-la.</p>
</li>
</ul>
<h2 id="312-depuracao">3.12 - Depuração</h2>
<p>Uma das habilidades mais importantes que você vai aprender é a depuração. Embora possa ser frustrante, a depuração é uma das partes mais intelectualmente ricas, desafiadoras e interessantes da programação.</p>
<p>De certa forma, depurar é similar ao trabalho de um detetive. Você tem pistas e precisa inferir os processos e eventos que levaram aos resultados exibidos.</p>
<p>A depuração também é como ciência experimental. Uma vez que você tenha uma ideia sobre o que está errado, basta alterar o programa e tentar novamente. Se a sua hipótese estava correta, você pode prever o resultado da alteração e chegar um passo mais perto de um programa funcional. Se a sua hipótese estava errada, é preciso criar outra. Como dizia Sherlock Holmes, “Quando se elimina o impossível, o que sobra, por mais incrível que pareça, só pode ser a verdade.” (A. Conan Doyle, O signo dos quatro).</p>
<p>Para algumas pessoas, programar e depurar são a mesma coisa. Isto é, a programação é o processo de depurar gradualmente um programa até que ele faça o que o programador quer. A ideia é que você comece com um programa funcional e faça pequenas alterações, depurando-as no decorrer do trabalho.</p>
<p>Por exemplo, o Linux é um sistema operacional que contém milhões de linhas de código, mas começou como um programa simples que Linus Torvalds usava para explorar o chip Intel 80386. Segundo Larry Greenfield, “Um dos primeiros projetos de Linus foi um programa que alternaria entre a exibição de AAAA e BBBB. Mais tarde isso se desenvolveu até virar o Linux.” (Guia do usuário de Linux versão beta 1).</p>
<h2 id="313-glossario">3.13 - Glossário</h2>
<dl>
<dt><a id="glos:função" href="#termo:função">função</a></dt>
<dd>Uma sequência nomeada de declarações que executa alguma operação útil. As funções podem receber argumentos ou não e podem ou não produzir algum resultado.</dd>

<dt><a id="glos:definição de função" href="#termo:definição de função">definição de função</a></dt>
<dd>Uma instrução que cria uma função nova, especificando seu nome, parâmetros e as instruções que contém.</dd>

<dt><a id="glos:objeto da função" href="#termo:objeto da função">objeto da função</a></dt>
<dd>Um valor é criado por uma definição de função. O nome da função é uma variável que se refere a um objeto de função.</dd>

<dt><a id="glos:cabeçalho" href="#termo:cabeçalho">cabeçalho</a></dt>
<dd>A primeira linha de uma definição de função.</dd>

<dt><a id="glos:corpo" href="#termo:corpo">corpo</a></dt>
<dd>A sequência de instruções dentro de uma definição de função.</dd>

<dt><a id="glos:parâmetro" href="#termo:parâmetro">parâmetro</a></dt>
<dd>Um nome usado dentro de uma função para se referir ao valor passado como argumento.</dd>

<dt><a id="glos:chamada de função" href="#termo:chamada de função">chamada de função</a></dt>
<dd>Uma instrução que executa uma função. É composta pelo nome da função seguido de uma lista de argumentos entre parênteses.</dd>

<dt><a id="glos:argumento" href="#termo:argumento">argumento</a></dt>
<dd>Um valor apresentado a uma função quando a função é chamada. Este valor é atribuído ao parâmetro correspondente na função.</dd>

<dt><a id="glos:variável local" href="#termo:variável local">variável local</a></dt>
<dd>Uma variável definida dentro de uma função. Uma variável local só pode ser usada dentro da sua função.</dd>

<dt><a id="glos:valor de retorno" href="#termo:valor de retorno">valor de retorno</a></dt>
<dd>O resultado de uma função. Se uma chamada de função for usada como uma expressão, o valor de retorno é o valor da expressão.</dd>

<dt><a id="glos:função com resultado" href="#termo:função com resultado">função com resultado</a></dt>
<dd>Uma função que devolve um valor.</dd>

<dt><a id="glos:função nula" href="#termo:função nula">função nula</a></dt>
<dd>Uma função que sempre devolve None.</dd>

<dt><a id="glos:None" href="#termo:None">None</a></dt>
<dd>Um valor especial apresentado por funções nulas.</dd>

<dt><a id="glos:módulo" href="#termo:módulo">módulo</a></dt>
<dd>Um arquivo que contém uma coleção de funções relacionadas e outras definições.</dd>

<dt><a id="glos:instrução de importação" href="#termo:instrução de importação">instrução de importação</a></dt>
<dd>Uma instrução que lê um arquivo de módulo e cria um objeto de módulo.</dd>

<dt><a id="glos:objeto de módulo" href="#termo:objeto de módulo">objeto de módulo</a></dt>
<dd>Um valor criado por uma instrução import que oferece acesso aos valores definidos em um módulo.</dd>

<dt><a id="glos:notação de ponto" href="#termo:notação de ponto">notação de ponto</a></dt>
<dd>A sintaxe para chamar uma função em outro módulo especificando o nome do módulo seguido de um ponto e o nome da função.</dd>

<dt><a id="glos:composição" href="#termo:composição">composição</a></dt>
<dd>O uso de uma expressão como parte de uma expressão maior ou de uma instrução como parte de uma instrução maior.</dd>

<dt><a id="glos:fluxo de execução" href="#termo:fluxo de execução">fluxo de execução</a></dt>
<dd>A ordem na qual as instruções são executadas.</dd>

<dt><a id="glos:diagrama da pilha" href="#termo:diagrama da pilha">diagrama da pilha</a></dt>
<dd>Representação gráfica de uma pilha de funções, suas variáveis e os valores a que se referem.</dd>

<dt><a id="glos:frame" href="#termo:frame">frame</a></dt>
<dd>Uma caixa em um diagrama da pilha que representa uma chamada de função. Contém as variáveis locais e os parâmetros da função.</dd>

<dt><a id="glos:traceback" href="#termo:traceback">traceback</a></dt>
<dd>Lista das funções que estão sendo executadas, exibidas quando ocorre uma exceção.</dd>

</dl>

<h2 id="314-exercicios">3.14 - Exercícios</h2>
<h3 id="exercicio-31">Exercício 3.1</h3>
<p>Escreva uma função chamada right_justify, que receba uma string chamada s como parâmetro e exiba a string com espaços suficientes à frente para que a última letra da string esteja na coluna 70 da tela:</p>
<pre><code class="language-python">&gt;&gt;&gt; right_justify('monty')
                                                                       monty
</code></pre>
<p>Dica: Use concatenação de strings e repetição. Além disso, o Python oferece uma função integrada chamada len, que apresenta o comprimento de uma string, então o valor de <code>len('monty')</code> é 5.</p>
<h3 id="exercicio-32">Exercício 3.2</h3>
<p>Um objeto de função é um valor que pode ser atribuído a uma variável ou passado como argumento. Por exemplo, do_twice é uma função que toma um objeto de função como argumento e o chama duas vezes:</p>
<pre><code class="language-python">def do_twice(f):
    f()
    f()
</code></pre>
<p>Aqui está um exemplo que usa do_twice para chamar uma função chamada print_spam duas vezes:</p>
<pre><code class="language-python">def print_spam():
    print('spam')
do_twice(print_spam)
</code></pre>
<ol>
<li>
<p>Digite este exemplo em um script e teste-o.</p>
</li>
<li>
<p>Altere <code>do_twice</code> para que receba dois argumentos, um objeto de função e um valor, e chame a função duas vezes, passando o valor como um argumento.</p>
</li>
<li>
<p>Copie a definição de <code>print_twice</code> que aparece anteriormente neste capítulo no seu script.</p>
</li>
<li>
<p>Use a versão alterada de <code>do_twice</code> para chamar <code>print_twice</code> duas vezes, passando <code>'spam'</code> como um argumento.</p>
</li>
<li>
<p>Defina uma função nova chamada <code>do_four</code> que receba um objeto de função e um valor e chame a função quatro vezes, passando o valor como um parâmetro. Deve haver só duas afirmações no corpo desta função, não quatro.</p>
</li>
</ol>
<p>Solução: http://thinkpython2.com/code/do_four.py.</p>
<h3 id="exercicio-33">Exercício 3.3</h3>
<blockquote>
<p>Nota: Este exercício deve ser feito usando-se apenas as instruções e os outros recursos que aprendemos até agora.</p>
</blockquote>
<ol>
<li>Escreva uma função que desenhe uma grade como a seguinte:</li>
</ol>
<pre><code>        + - - - - + - - - - +
        |         |         |
        |         |         |
        |         |         |
        |         |         |
        + - - - - + - - - - +
        |         |         |
        |         |         |
        |         |         |
        |         |         |
        + - - - - + - - - - +
</code></pre>
<blockquote>
<p>Dica: para exibir mais de um valor em uma linha, podemos usar uma sequência de valores separados por vírgula:
<code>python
print('+', '-')</code>
Por padrão, print avança para a linha seguinte, mas podemos ignorar esse comportamento e inserir um espaço no fim, desta forma:
<code>python
print('+', end=' ')
 print('-')</code>
A saída dessas instruções é <code>+ -</code>.
Uma instrução <code>print</code> sem argumento termina a linha atual e vai para a próxima linha.</p>
</blockquote>
<ol>
<li>Escreva uma função que desenhe uma grade semelhante com quatro linhas e quatro colunas.</li>
</ol>
<p>Solução: http://thinkpython2.com/code/grid.py. Crédito: Este exercício é baseado em outro apresentado por Oualline, em Practical C Programming, Third Edition, O’Reilly Media, 1997.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../04-caso-interface/" class="btn btn-neutral float-right" title="Capítulo 4: Estudo de caso: projeto de interface">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../02-vars-expr-instr/" class="btn btn-neutral" title="Capítulo 2: Variáveis, expressões e instruções"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../02-vars-expr-instr/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../04-caso-interface/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
